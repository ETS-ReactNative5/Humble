<!DOCTYPE html>
<html>
    <head>
        <title>Administration | Humble</title>
        <link rel='stylesheet' href='/css/bootstrap'/>
        <link rel='stylesheet' href='/css/admintheme'/>
        <link rel="stylesheet" href="/css/jqueryui" />
        <link rel="stylesheet" href="/css/widgets" />
        <link rel='stylesheet' href='/css/desktop'/>
        <link rel='stylesheet' href='/css/admin'/>
        <style type="text/css">
            div > i {
                color: #333; font-size: 22px; box-sizing: border-box;
            }
            div:hover > i {
                color: #bc2328;
            }
            div,table,tr,td,form,input,select { position: relative}
            td              { font-family: sans-serif; font-size: 9pt; }
            .pageTitle      { font-family: sans-serif; font-size: 2.2em; color: #006699 }
            .packageTitle   { clear: left; background-color: #eaeaea; font-family: sans-serif; font-size: 1.2em; color: #222; padding: 10px 2px 10px 2px; border: 1px solid #999; margin: 2px 0px 2px 0px; overflow: hidden }
            .FL             { float: left; margin: 0px 1px 1px 0px }
            .FR             { float: right; margin: 1px; }
            .modfield       { font-family: sans-serif; font-size: 9pt; padding: 3px 2px 3px 2px }
            .modaction      { font-family: sans-serif; font-size: 8pt;  color: green }
            .moddesc        { clear: both; font-size: 7pt; color: #888; width: 858px }
            .humbleModule     { width: 450px; float: left; height: 340px;  margin: 2px;  border-top-right-radius: 20px;   }
            .cellTitle      { font-size: 9px; font-family: monospace; vertical-align: top }
            .cellData       { padding-left: 20px; white-space: nowrap; vertical-align: top }
            .humble-ci        {
                margin-left: auto; margin-right: auto; width: 600px; border: 1px solid #444; border-radius: 10px; padding: 20px; margin-bottom: 25px
            }
            .humble-ci-legend {
                font-weight: bold; font-family: sans-serif;
            }
            .humble-ci-option {
                padding: 30px 40px; font-size: 1.5em; background-color: #a7cfdf; color: #333; font-weight: bold; border: 1px solid #666; border-radius: 5px; margin-bottom: 10px; opacity: .6
            }
            .humble-ci-option:hover {opacity: 1.0; cursor: pointer}
            .humbleModuleHeader { height: 30px; background: #23538a; /* Old browsers */
                                background: -moz-linear-gradient(top,  #23538a 0%, #a7cfdf 100%); /* FF3.6+ */
                                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#23538a), color-stop(100%,#a7cfdf)); /* Chrome,Safari4+ */
                                background: -webkit-linear-gradient(top,  #23538a 0%,#a7cfdf 100%); /* Chrome10+,Safari5.1+ */
                                background: -o-linear-gradient(top,  #23538a 0%,#a7cfdf 100%); /* Opera 11.10+ */
                                background: -ms-linear-gradient(top,  #23538a 0%,#a7cfdf 100%); /* IE10+ */
                                background: linear-gradient(top,  #23538a 0%,#a7cfdf 100%); /* W3C */
                                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#23538a', endColorstr='#a7cfdf',GradientType=0 ); /* IE6-9 */
                                border-top-right-radius: 20px;
                                color: white; font-size: 12pt; font-family: sans-serif;
                                }
            .humble-log-output {
                width: 90%; height: 500px; font-size: .8em; font-family: monospace, serif;
            }
            #configurationPage {  width: 100%; background-color: rgba(255,255,255,.3); overflow: auto}
            #new_user_area, #new_package_area, #new_module_area, #new_component_area, #new_controller_area {
                width: 500px; padding: 15px 40px; background-color: rgba(00,102,153,.8); color: white; font-family: sans-serif; font-size: .9em;
                margin-left: auto; margin-right: auto; margin-bottom: 2px; margin-top: 0px;
            }
            .new-module-desc {
                margin-bottom: 15px; font-size: .8em; letter-spacing: 2px; vertical-align: top;
            }
            .administration-mini-icon {
                 margin-left: auto; margin-right: auto; font-size: .8em;  padding: 10px; text-align: center
            }
        </style>
        <script type="text/javascript">
            var UseTranparentWindows = '{{ settings.getTransparentWindows() }}';
        </script>
        <script type="text/javascript" src='/js/jquery'></script>
        <script type='text/javascript' src='/js/bootstrap'></script>
        <script type='text/javascript' src='/js/common'></script>
        <script type='text/javascript' src='/js/desktop'></script>
        <script type='text/javascript' src='/js/jqueryui'></script>
        <script type='text/javascript' src='/js/widgets'></script>
        <script type="text/javascript" src='/js/admin'/></script>
        <script type='text/javascript'>
            $(document).ready(Administration.init);
            Humble.init();
        </script>
    </head>
    <body style="overflow: hidden;">
        <!-- This hidden sizing layer is used to calculate the width of text... by fetching the "scrollAmount", we can determine the width of any block of text placed in the layer -->
        <div style="position: absolute; top: -100px; left: -200px; overflow: auto; width: 1px" id="hiddenSizingLayer"></div>
        <div id="paradigm-virtual-desktop" style="margin: 0px; padding: 0xp; height: 100%; width: 100%; position: absolute; top: 0px; left: 0px;">

            <div id='main-container'>
                <div id='navigation-bar'>
                    <div id='landing-clock' class='landing-clock'></div>
                    <div style='float: right; margin-right: 60px; position: relative'>
                    </div>
                    <ul style='position: relative; z-index: 3'><!-- humble_logo_white.png -->
                       <li style='padding-top: 6px'><img src='/images/humble/djikstra_light.png' style='height: 30px; position: relative; top: 3px; left: 5px' /></li>
                       <li class='active'><a href='#'>Places</a>
                          <ul>
                             <li><a target="_BLANK" href='/admin/'>Administration</a></li>
                             <li><a href='#'>Documentation</a>
                                <ul>
                                   <li><a target="_BLANK" href='/internal/docs/'>Developer Documentation</a></li>
                                   <li><a target="_BLANK" href='/docs/'>API Documentation</a></li>
                                   <li><a target="_BLANK" href='#'>Administration Documentation</a></li>
                                </ul>
                             </li>
                             <li><a href='#'>Services</a>
                                <ul>
                                   <li><a target="_BLANK" href='/humble/directory/index'>Directory</a></li>
                                   <li><a target="_BLANK" href='/humble/directory/authorizations'>Authorizations</a></li>
                                </ul>
                             </li>
                             <li><a target="_BLANK" href='/paradigm/actions/open'>Workflow Editor</a></li>
                             <li><a target="_BLANK" href='/paradigm/actions/designer'>Form Designer</a></li>
                             <li style="border-top: 1px solid silver; "><a target="_BLANK" href='/humble/user/logout'>Logout</a>

                          </ul>
                       </li>
                        <li><a href='#'>Admin</a>
                            <ul>
                                 <li><a href='#' onclick='Administration.admin.add.user(); return false'>Add User</a></li>
                                 <li><a href='#' onclick='Administration.admin.add.list(); return false'>Manage User Lists</a></li>
                                 {% if (permissions.getSuperUser() == 'Y') %}
                                    <li><a href='#' onclick='Administration.status.quiesce.start(); return false'>Quiesce System</a></li>
                                    <li><a href='#' onclick='Administration.status.quiesce.start(); return false'>Put System Online</a></li>
                                    <li><a href='#' onclick='Administration.templates.clone(); return false'>Clone Component Templates</a></li>
                                 {% endif %}
                            </ul>
                        </li>

                       <li><a href='#'>About</a></li>
                       <li><a href='#'>Contact</a></li>
                    </ul>

                </div>

                <div style='float: left; height: 100%; width: 70px; background-color: rgba(252,252,252,.3); margin-right: 10px' id='widgets-column'>

                    <div class='administration-mini-icon' title='Documentation' style="margin-top: 20px" onclick="Administration.documentation.home()">
                        <i class="glyphicons glyphicons-book" style="margin-left: 2px; font-size: 30px"> </i>
                    </div>
                    <div class='administration-mini-icon' title='Unit Tests' onclick="Administration.tests.open()">
                        <i class="glyphicons glyphicons-car-wheel" style="margin-left: 2px; font-size: 30px"></i>
                    </div>
                    <hr style="margin-bottom: 10px; margin-top: 10px"/>

                    <div class='administration-mini-icon' title='Event Monitor' onclick="Administration.events.open()">
                        <i class="glyphicon glyphicon-warning-sign" style="margin-left: 2px; font-size: 30px"></i>
                    </div>
                    <hr style="margin-bottom: 10px; margin-top: 10px"/>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('General')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        General
                    </div>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('Warning')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        Warning
                    </div>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('Error')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        Error
                    </div>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('MySQL')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        MySQL
                    </div>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('MongoDB')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        MongoDB
                    </div>
                    <div class='administration-mini-icon' title='Log Viewer' onclick="Administration.logs.open('System')">
                        <i class="glyphicons glyphicons-blog" style="margin-left: 2px; font-size: 30px"></i><br />
                        System
                    </div>
                    <hr style="margin-bottom: 10px; margin-top: 10px"/>
                    <div id="landing-minimized-windows" style=" width: 100%; height: 400px; padding-top: 5px; padding-bottom: 5px; border: 1px solid transparent; border-radius: 5px;">

                    </div>
                </div>

                <div style='float: left' id='apps-column'>
                <div style='min-width: 500px; width: 500px; float: right; margin-left: 2px; ' id='humble-creation-forms'>
                    <div id="new_package_area">
                        <span style="font-size: 1.5em">New Package Creation</span><br /><br />
                        All modules are contained within packages.  Should you wish to create a new package for your module, you may do so here<br /><br />
                        <form name="new_package_form" id="new_package_form" onsubmit="return false" >
                            <input type="text" name="new_package" id="new_package" class="new-user-email" style='color: #333'/>
                            <input type="button" name="new_package_submit" id="new_package_submit"  value="Create Package" />
                        </form>
                    </div>

                    <div id='new_module_area'>
                        <span style="font-size: 1.5em">Module Creation</span><br /><br />
                        You can create a new module using the form below.  Please specify which package your module will belong to, the unique namespace that will be used to identify the
                        components that namespace will be controlling, a name for your module, and a prefix that will be used to identify any tables you will be creating<br /><br /><br />
                        <form name="new_module_form" id="new_module_form" onsubmit="return false" >
                            <select name="package" id="package" class="new-module-field" style='color: #333'>
                                <option value=''></option>
                                {% for package in packages.listSubdirectories('Code/') %}
                                    <option value='{{ package }}'>{{ package }}</option>
                                {% endfor %}
                            </select><br />
                            <div class='new-module-desc'>Package</div>
                            <input type="text" name="namespace" id="namespace" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Namespace</div>
                            <input type="text" name="module" id="module" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Module Name Prefix</div>
                            <input type="text" name="prefix" id="prefix" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Database Prefix</div>
                            <input type="button" name="new_module_submit" id="new_module_submit"  value="Create" />
                        </form>

                    </div>

                    <div id='new_component_area'>
                        <span style="font-size: 1.5em">Component Creation</span><br /><br />
                        You can build a new component using the form below.  Please specify which namespace your component will be bound to, the type of component, and the name of the new component<br /><br /><br />
                        <form name="new_component_form" id="new_component_form" onsubmit="return false" >
                            <input type='text' name='short_description' id='short_description' /><br />
                            <div class='new-module-desc'>Short Description</div>
                            <textarea name='long_description' id='long_description' ></textarea><br />
                            <div class='new-module-desc'>Long Description</div>
                            <select name="component_namespace" id="component_namespace" class="new-module-field" style='color: #333'>
                            </select><br />
                            <div class='new-module-desc'>Namespace</div>
                            <select name="component_type" id="component_type" class="new-module-field" style='color: #333'>
                                <option value=''>Please select type of component to create</option>
                                <option value='models'>Model Class</option>
                                <option value='entities'>Entity Class</option>
                                <option value='helpers'>Helper Class</option>
                            </select><br />
                            <div class='new-module-desc'>Component Type</div>

                            <div style='margin-bottom: 20px; font-size: 1.1em'>
                                <input type='checkbox' value='Y' id='generates_events' name='generates_events' /> Event Generator
                            </div>

                            <select name="component_package" id="component_package" class="new-module-field" style='color: #333'>
                            </select><br />
                            <div class='new-module-desc'>Component Package</div>
                            <select name="component_category" id="component_category" class="new-module-field" style='color: #333'>
                            </select><br />
                            <div class='new-module-desc'>Component Category</div>
                            <input type="text" name="component_name" id="component_name" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Component Name</div><br />
                            <input type="button" name="new_component_submit" id="new_component_submit"  value="Build" />
                            <!--input type='text' name='component_package_combo' id='component_package_combo' />
                            <input type='text' name='component_category_combo' id='component_category_combo' /-->
                        </form>

                    </div>

                    <div id='new_controller_area'>
                        <span style="font-size: 1.5em">Controller Creation</span><br /><br />
                        You can create a new controller using the form below.  Please specify which namespace your controller will belong to, the templater the controller will be using, a name for the controller, and the name of the first action<br /><br /><br />
                        <form name="new_controller_form" id="new_controller_form" onsubmit="return false" >
                            <select name="controller_namespace" id="controller_namespace" class="new-module-field" style='color: #333'>
                            </select><br />
                            <div class='new-module-desc'>Namespace</div>
                            <select name="controller_templater" id="controller_templater" class="new-module-field" style='color: #333'>
                            </select><br />
                            <div class='new-module-desc'>Templater</div>
                            <input type="text" name="controller_name" id="controller_name" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Controller Name</div>
                            <input type="text" name="controller_description" id="controller_description" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Controller Description</div>
                            <input type="text" name="action_name" id="action_name" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Name of Action</div>
                            <input type="text" name="action_description" id="action_description" class="new-module-field" style='color: #333'/><br />
                            <div class='new-module-desc'>Action Description</div><br />
                            <input type="button" name="new_controller_submit" id="new_controller_submit"  value="Create" />
                        </form>

                    </div>
                </div>

                    <div id='modules_list' style="display: inline-block">
                        <div style='background-color: rgba(232,232,232,.3); padding: 10px 0px 10px 0px'>
                        <select name='globalAction' id='globalAction' style="font-size: 1.1em; height: 28px; width: 300px">
                            <option style='font-style: italic' value="">Choose a Global action...</option>
                            <option value="install">Install All</option>
                            <option value="refresh">Refresh All</option>
                            <option value="update">Update All</option>
                            <option value="recompile">Compile All</option>
                            <option value="clear">Clear All</option>
                            <option value="documentation">Generate Docs</option>
                            <option value="services">Update Service Directory</option>
                        </select><input type='button' onclick='Administration.globalAction()' value=' Go ' style='font-size: 1em; margin-left: 2px; width: 70px; height: 28px' class="settingsButton" />
                        </div>
                        <div style='width: 500px; float: right; margin-left: 2px; '>

                        </div>
                        {% for package, modules in installer.getModules() %}
                            <div class='packageTitle'>Package: <b> {{ package }} </b></div><div style='height: 1px'></div>
                            {% for module in modules %}
                                {% set data = directory.moduleInformation(module.namespace) %}
                                <div class='humbleModule'>
                                    <div class='humbleModuleHeader'>
                                        <div style='float:right; margin-right: 15px;'>
                                            <table>
                                                <tr>
                                                    {% if data.installed != '' %}
                                                        {% set color = 'white' %}
                                                        <td><img onclick='Administration.refresh("{{ package }}","{{ module.module }}","{{ module.namespace }}")' src='/web/images/refresh_icon.png' height='24' style='cursor: pointer' title='Refresh...'/></td>
                                                        <td><img onclick='Administration.update("{{ package }}","{{ module.module }}","{{ module.namespace  }}")' src='/web/images/update.png' height='20' style='cursor: pointer' title='Update...'/></td>
                                                        <td><img onclick='Administration.compile("{{ package }}","{{ module.module }}","{{ module.namespace  }}")' src='/web/images/compile.gif' height='20' style='cursor: pointer' title='Compile Controllers...'/></td>
                                                        <td><img onclick='Administration.clearcache("{{ package }}","{{ module.module }}","{{ module.namespace  }}")' src='/web/images/clear.png' height='20' style='cursor: pointer' title='Clear Cache...'/></td>
                                                        <td>
                                                        {% if data.required != 'Y' %}
                                                            <input type='checkbox' onclick='Administration.enable(this,"{{ module.namespace  }}","{{ package }}")' name='{{ module.namespace  }}' id='{{ module.namespace  }}'
                                                            {% if data.enabled == 'Y' %}
                                                                checked
                                                            {% endif %}
                                                        {% endif %}
                                                    {% else %}
                                                        <td><img onclick='Administration.install("{{ package }}","{{ module.module }}","{{ module.namespace }}")' src='/web/images/install.png' height='20' style='cursor: pointer' title='Install...'/></td>
                                                        {% set color = 'red' %}
                                                    {% endif %}
                                                </tr>
                                            </table></div>
                                        {% if module.installed == '' %}
                                            <img onclick='Administration.uninstall("{{ package }}","{{ module.module }}","{{ module.namespace  }}")' src='/web/images/uninstall.png' height='20' style='float: left; margin: 2px ;  cursor: pointer' title='Uninstall...'/>
                                        {% endif %}
                                        <span style="color: {{ color }}">{{ module.title }}</span>
                                    </div>
                                    <div>
                                        <table width='100%' border='1px' style='border-collapse: collapse; background-color: white'>
                                            <tr>
                                                <td colspan='3'>
                                                    <div class='cellTitle'>Description</div>
                                                    <div id="cellData">{{ module.description }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><div class='cellTitle'>Namespace</div><div class="cellData"><b>{{ module.namespace  }}</b></div></td>
                                                <td><div class='cellTitle'>Author</div><div class="cellData">{{ module.author }}</div></td>
                                                <td><div class='cellTitle'>Version</div><div class="cellData">{{ module.version }}</div></td>
                                            </tr>
                                            <tr>
                                                <td><div class='cellTitle'>Prefix</div><div class="cellData">{{ module.prefix }}</div></td>
                                                <td><div class='cellTitle'>Email</div><div class="cellData">{{ module.email }}</div></td>
                                                <td><div class='cellTitle'>Weight</div><div class="cellData">{{ module.weight }}</div></td>
                                            </tr>
                                        </table>
                                        <table width='100%' border='1px' style='border-collapse: collapse; background-color: white'>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Models</div>
                                                    {% set icon = directory.exists(module.models,module) %}
                                                    <div class="cellData">{{ icon|raw }}{{ module.models }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Entities</div>
                                                    <div class="cellData">{{ directory.exists(module.entities,module)|raw }}{{ module.entities }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Controllers</div>
                                                    <div class="cellData">{{ directory.exists(module.controller,module)|raw }}{{ module.controller }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Controllers Cache</div>
                                                    <div class="cellData">{{ directory.exists(module.controller_cache,module)|raw }}{{ module.controller_cache }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Views</div>
                                                    <div class="cellData">{{ directory.exists(module.views,module)|raw }}{{ module.views }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Views Cache</div>
                                                    <div class="cellData">{{ directory.exists(module.views_cache,module)|raw }}{{ module.views_cache }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Helpers</div>
                                                    <div class="cellData">{{ directory.exists(module.helpers,module)|raw }}{{ module.helpers }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>RPC</div>
                                                    <div class="cellData">{{ directory.exists(module.RPC,module)|raw }}{{ module.RPC }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Schema Install</div>
                                                    <div class="cellData">{{ directory.exists(module.schema_install,module)|raw }}{{ module.schema_install }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Schema Update</div>
                                                    <div class="cellData">{{ directory.exists(module.schema_update,module)|raw }}{{ module.schema_update }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'>Images</div>
                                                    <div class="cellData">{{ directory.exists(module.images,module)|raw }}{{ module.images }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Default Templater</div>
                                                    <div class="cellData">{{ module.templater }}</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='cellTitle'> MongoDB</div>
                                                    <div class="cellData">{{ module.mongodb }}</div>
                                                </td>
                                                <td>
                                                    <div class='cellTitle'>Configuration</div>
                                                    <div class="cellData">{{ directory.exists(module.configuration,module)|raw }}{{ module.configuration }}</div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>

                </div>

                <!-- ###################################################################################################### -->


                <!-- ###################################################################################################### -->
                <div style='clear: both'></div>

            </div>
            <div style="background-color: #333; color: ghostwhite; font-size: .8; font-style: sans-serif; letter-spacing: 2px" id='humble-footer'>
                &copy; The Humble Project, All Rights Reserved
            </div>
        </div>
    </body>
</html>
